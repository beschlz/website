---
layout: ../../layouts/BlogPostLayout.astro
title: "Git Worktrees"
description: ""
date: "18.02.2023"
---

Blog Beitrag Git Worktrees

Git Worktrees sind das wahrscheinlich unbekannteste beste Feature von git.  Git Worktrees erlauben es, mehrere Branches gleichzeitig auszuhecken und daran zu arbeiten. 


Wahrscheinlich kennt jeder die Situation, dass man auf einem Branch arbeitet und dann noch eine Anmerkung zu einem PR reinbekommt, die man schnell arbeiten möchte. Ohne Git Worktrees muss man jetzt seine Änderungen stashen oder man macht einen lästigen commit mit der Message „soft reset me later…“ (was man bestimmt niemals vergisst) aufgeben.

Clont man aber ein Projekt in git per default, hat man genau einen Stand zur Zeit. Mit checkout kann man zwar zwischen Branches und Commits wechseln, aber nie an zwei verschiedenen Ständen zur Zeit ohne Wechsel arbeiten.

Mit Git Worktrees geht das. Hierbei hinterlegt git die Branches, die man auschecken möchte in verschiedenen Verzeichnissen ab, zwischen denen man leicht im selben Repo wechseln kann. 

Am einfachsten könnt ihr das ausprobieren, wenn ihr in ein bestehendes Repo wechselt. 

Terminal:
	git worktree add ../testworktree main

Damit wird im Verzeichnis ../testworktree der main Branch ausgecheckt. Hier seht ihr auch ganz gut, dass Worktrees immer in einem separatem Verzeichnis liegen.

Die Verzeichnisstruktur ist aber so etwas verwirrend, daher empfiehlt es sich, das Repo anders aufzusetzen.


Worktree lassen sich immer in git nutzen. 

git worktree list
git worktree add
git worktree remove


Creating a —bare Repo

Die beste Erfahrung mit Worktrees hat man in einem —bare Repository. 


mkdir website
git checkout —bare git@github.com:beschlz/website.git

/website/website.git

/repo
   -> ./website.git
   -> ./feature-a
   -> ./feature-b
   -> ./hotfix-a

Mit der —bare flag klonen wir nur das Repo, ohne einen Branch auszuchecken. In meinem Setup habe ich gerne die Ordner für die Branches auf derselben Ebene wie den .git Folder. Es ist aber auch genauso möglich, nur das bare Repo auszuhecken und in diesem Verzeichnis die Worktrees hinzuzufügen. 

Entsprechend wären die git commands
git checkout —bare git@github.com:beschlz/website.git
cd website.git 
git worktree add main main

/worktree.git
   -> ./main 
   -> ./feature-a
   -> ./feature-b
 

Adding Worktrees


Removing Worktrees